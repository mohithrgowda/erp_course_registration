<!doctype html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>PF DECLARATION</title>
  </head>
  <body>

    <div class="min-vh-100 d-flex flex-column" id="html">

        <div class="container px-4">

        <div class="container  info clearfix p-3 mt-5">

            <p class="float-end">Date : <script>document.write(new Date().toLocaleDateString());</script></p>

        </div>

        <div class="container  danger p-3">

            <p>To,</p>
            <p>The Director<br>
            Transact Bpo Services Pvt Ltd<br>
            No.44/1-1, Ward No.10, Industrial Suburb,<br>
            Opp.VaishnaviSaphire Centre,<br>
            Yeshwanthapura,<br>
            Bangalore -560022</p>

        </div>

        <div class="container  warning p-3">

            <p>Dear Sir,</p>

        </div>

        <div class="container  success p-3">

            <h6 class="text-decoration-underline">Subject: Self declaration to exempt from the PF deductions</h6>

        </div>

        <div class="container  primary p-3">

            <p class="mb-4">
                With reference to the above subject I would like to opt out form the PF coverage / monthly
                deductions under the provision of Employees provident funds scheme, 1952 (paragraph 34 & 57)
                & Employeesâ€™ pension scheme 1995 (paragraph 24), my monthly Basic wages are above Rs.15000/-
                therefore I hereby request you to opt me out from the PF deductions.
            </p>

            <p class="mb-4">
                The Company HR- representative has explained me about the benefits having the Employees provident
                fund and pension scheme as well.
            </p>

            <p>
                I hereby request you to consider my request and exclude me from the PF coverage/ monthly deductions
                under the above provision.
            </p>

        </div>

        <div class="container  secondary p-3">

            <p>
                Thanking you.
            </p>

            <p>
                Employee name <span id="name"></span>
            </p>

            <p>
                <label for="file_sign" id="sign_label">(Upload Signature)</label>
                <label for="file_sign" id="image_label">
                <img src="" class="rounded img-fluid" alt="" id="previewImg">
                </label>
                <input type="file" name="file_sign" accept="image/gif, image/jpeg, image/png" id="file_sign" style="display: none;" onchange="previewFile(this)">
                <span class="d-block">Signature</span>
            </p>

        </div>

        <div class="container mb-2" style="color:Red;font-weight:bolder;">
           Note: You have to submit the downloaded copy for payroll activation
         </div>

    <div class="container mb-2 clearfix" id="download_container" style="display: none;">
        <button type="button" disabled class="btn btn-primary shadow-none float-end" id="download">
            Download
        </button>
    </div>


    </div>

    </div>
    
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
<script>
    $(function(){ 

        var paramaters = new URLSearchParams(window.location.search);

        //if(paramaters.has('name'))
		if(paramaters.has('value'))
        {
            //var parameter = paramaters.get('name');
			var parameter = paramaters.get('value');
			parameter=atob(parameter);
			var mydataArray = parameter.split(",");
            //$("#name").text(parameter);
			$("#name").text(mydataArray[0]);
            $("#name").addClass("fw-bold text-capitalize");
            $("#download_container").show();
        }

        $("#download").on("click",function(){
          $(this).hide();
          $("#sign_label").hide();
          if($("#previewImg").attr("src") == "")
          {
            $("#image_label").hide();
          }
          if($("#name").text() != "" && $("#previewImg").attr("src") != "")
          {
            download();
          }
          else
          {
            alert("Enter All Required Information")
            $(this).show();
            if($("#previewImg").attr("src") == "")
            {
                $("#sign_label").show();
            }
            
          }
        });   

    })

    function download()
    {
	debugger;
        var element = document.getElementById('html');
        var opt = {
        filename:     'pfdeclaration.pdf'
         };
        html2pdf(element,opt);
        function show() 
        {
          $("#download").show();
          $("#image_label").show();
          if($("#previewImg").attr("src") == "")
          {
            $("#sign_label").show();
          }
          else
          {
            $("#sign_label").hide();
          }
        }
        setTimeout(show, 5000);
		var paramaters = new URLSearchParams(window.location.search);

        //if(paramaters.has('name'))
		if(paramaters.has('value'))
        {
		var parameter = paramaters.get('value');
			parameter=atob(parameter);
		var mydataArray = parameter.split(",");
		var empid=mydataArray[1];
		 $.ajax({
            type: 'GET',
            url: '/signpfdeclaration',
            data: {
			'empid':empid
			},
            dataType:"json",
            success: function(data) {
				alert(data);
				
            },
			 error: function(data) {
               
            }
        });
			
			
			
		}
	/*
        $.ajax({
            type: 'GET',
            url: '/verifyempstat',
            data: {
			'empid':empid
			},
            dataType:"json",
            success: function(data) {
				console.log('file deleted in '+tblname);
				window.location='verifyemp';
				
            },
			 error: function(data) {
               
            }
        });
		*/

     
    }

    function previewFile(input) {
            debugger;
            var file = $("input[type=file]").get(0).files[0];

            if (file) {
                var reader = new FileReader();

                reader.onload = function() {
                    
                    var width = $("#sign_label").width();
                    $("#previewImg").attr("src", reader.result);
                    $("#previewImg").addClass("border border-dark mb-3");
                    $("#previewImg").attr("width",width);
                    $("#sign_label").hide();
                    $("#download").removeAttr("disabled");
                }

                reader.readAsDataURL(file);
            }
        }
</script>

  </body>
</html>